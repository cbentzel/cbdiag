<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cbdiag - Block Diagram Tool</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div id="app">
        <aside class="sidebar">
            <div class="sidebar-header">
                <span class="logo">cbdiag</span>
                <button id="new-diagram-btn" class="icon-btn" title="New Diagram">+</button>
            </div>
            <div class="diagram-list" id="diagram-list">
                <!-- Diagram items will be rendered here -->
            </div>
        </aside>

        <div class="editor">
            <header class="toolbar">
                <div class="toolbar-left">
                    <input type="text" id="diagram-name" class="diagram-name-input" placeholder="Untitled Diagram">
                    <span class="separator"></span>
                    <button id="add-block-btn" class="tool-btn" title="Add Block">+ Block</button>
                    <button id="add-proxy-btn" class="tool-btn" title="Add Proxy Block">+ Proxy</button>
                    <button id="add-connection-btn" class="tool-btn" title="Add Connection">+ Connection</button>
                    <span class="separator"></span>
                    <button id="delete-btn" class="tool-btn" title="Delete Selected">Delete</button>
                </div>
                <div class="toolbar-right">
                    <span id="save-status" class="save-status">Saved</span>
                </div>
            </header>

            <nav id="breadcrumb" class="breadcrumb hidden">
                <!-- Breadcrumb items will be rendered here -->
            </nav>

            <main class="canvas-container">
            <svg id="canvas" class="canvas">
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
                    </marker>
                </defs>
                <g id="canvas-content">
                    <g id="connections-layer"></g>
                    <g id="blocks-layer"></g>
                </g>
            </svg>
        </main>

        <aside id="properties-panel" class="properties-panel hidden">
            <h3 id="properties-title">Block Properties</h3>
            <div id="block-properties">
                <label>
                    Label:
                    <input type="text" id="block-label" placeholder="Enter label">
                </label>
                <label>
                    Color:
                    <input type="color" id="block-color" value="#4a90d9">
                </label>
            </div>
            <div id="proxy-properties" class="hidden">
                <label>
                    Linked Diagram:
                    <select id="proxy-diagram-select">
                        <option value="">Select a diagram...</option>
                    </select>
                </label>
            </div>
            <div id="common-properties">
                <label>
                    Opacity:
                    <input type="range" id="block-opacity" min="0" max="1" step="0.1" value="1">
                </label>
                <label>
                    Width:
                    <input type="number" id="block-width" min="50" max="500">
                </label>
                <label>
                    Height:
                    <input type="number" id="block-height" min="30" max="500">
                </label>
                <label>
                    Z-Order:
                    <div class="z-order-controls">
                        <input type="number" id="block-zindex" min="-999" max="999">
                        <div class="z-order-buttons">
                            <button id="bring-to-front" class="z-btn" title="Bring to Front">⬆⬆</button>
                            <button id="send-to-back" class="z-btn" title="Send to Back">⬇⬇</button>
                        </div>
                    </div>
                </label>
            </div>
        </aside>

        <div id="proxy-modal" class="modal hidden">
            <div class="modal-content">
                <h3>Select Diagram for Proxy</h3>
                <select id="proxy-modal-select">
                    <option value="">Select a diagram...</option>
                </select>
                <div class="modal-buttons">
                    <button id="proxy-modal-cancel" class="tool-btn">Cancel</button>
                    <button id="proxy-modal-create" class="tool-btn primary">Create Proxy</button>
                </div>
            </div>
        </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
